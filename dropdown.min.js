
(function(global,document){'use strict';if(typeof Array.isArray!=='function'){Array.isArray=function(arr){return Object.prototype.toString.call(arr)==='[object Array]';};}
var VERSION='1.0',defaults={width:'200px',ellisis:true},Dropdown=function(objects){var i;objects=objects||[{selector:'.dropdown'}];if(!Array.isArray(objects)||objects.length===0){console.error('Warning: The parameter passed to Dropdown constructor','have to be an array of strings or an array of objects. Your value','was not used.');objects=[{selector:'.dropdown',placeholder:'Choose one option'}];}
for(i=0;i<objects.length;i=i+1){if(typeof objects[i]==='string'){objects[i]={selector:objects[i]};}
if(typeof objects[i]!=='object'){console.warn('Warning: The element of index '+i+' on the Dropdown','contructor array was invalid, so it was removed from the array.');delete objects[i];}
if(!Object.prototype.hasOwnProperty.call(objects[i],'selector')){console.warn('Warning: The object of index '+i+' on the Dropdown','contructor array do not have selector property, so it was','removed from the array.');delete objects[i];}}
this.objects=objects;};function hasClass(element,className){if(element.classList){element.classList.add(className);}else if(!hasClass(element,className)){element.className+=" "+className;}}
function removeClass(element,className){if(element.classList){element.classList.remove(className);}else if(hasClass(element,className)){var reg=new RegExp('(\\s|^)'+className+'(\\s|$)');element.className=element.className.replace(reg,' ');}}
function addClass(element,className){if(element.classList){element.classList.add(className);}else if(!hasClass(element,className)){element.className+=" "+className;}}
function containerClick(event){event.stopPropagation();addClass(this,'dropdown-open');}
function containerClickOut(event){event.stopPropagation();removeClass(this.parentNode,'dropdown-open');}
function dropdownClick(event){event.stopPropagation();}
function optionClick(){var element=document.createElement('span'),selected=this.getAttribute('data-index'),dropdown=this.parentNode.parentNode,view=dropdown.querySelector('.dropdown-view'),select=null,options=null,i=0;element.setAttribute('data-selected',selected);element.innerHTML=this.innerHTML;view.innerHTML='';view.appendChild(element);select=dropdown.nextSibling;select.options[selected-1].selected='selected';options=dropdown.querySelectorAll('li.selected');for(i=0;i<options.length;i=i+1){removeClass(options[i],'selected');}
addClass(this,'selected');removeClass(this.parentNode.parentNode,'dropdown-open');}
function buildHTML(element,settings){var dropdown=document.createElement('div'),view=document.createElement('a'),options=document.createElement('ul'),option=null,background=document.createElement('div'),i=0,j=0,index=1,optgroup=null;for(i=0;i<element.attributes.length;i=i+1){dropdown.setAttribute(element.attributes[i].nodeName,element.attributes[i].nodeValue);}
dropdown.className+=' dropdown-container';dropdown.style.width=defaults.width;dropdown.onclick=containerClick;if(defaults.ellisis){dropdown.className+=' dropdown-ellipsis';}
view.className='dropdown-view';view.href='#';view.onclick=function(event){event.preventDefault();};view.setAttribute('tab-index','-1');option=document.createElement('span');if(Object.prototype.hasOwnProperty.call(settings,'placeholder')){option.innerHTML=settings.placeholder;}else{option.innerHTML=element[0].innerHTML;}
view.appendChild(option);options.className='dropdown-options';options.onclick=dropdownClick;for(i=0;i<element.children.length;i=i+1){if(element.children[i].tagName==='OPTION'){option=document.createElement('li');option.className='option';option.setAttribute('data-index',index);option.innerHTML=element.children[i].innerHTML;option.onclick=optionClick;options.appendChild(option);index=index+1;}else if(element.children[i].tagName==='OPTGROUP'){optgroup=element.children[i];option=document.createElement('li');option.className='optgroup';option.innerHTML=optgroup.getAttribute('label');options.appendChild(option);for(j=0;j<optgroup.children.length;j=j+1){option=document.createElement('li');option.className='option group-option';option.setAttribute('data-index',index);option.innerHTML=optgroup.children[j].innerHTML;option.onclick=optionClick;options.appendChild(option);index=index+1;}}}
background.className='dropdown-outside';background.onclick=containerClickOut;dropdown.appendChild(view);dropdown.appendChild(options);dropdown.appendChild(background);return dropdown;}
function doSomething(element,settings){var parent=element.parentNode,dropdown=buildHTML(element,settings);parent.insertBefore(dropdown,element);element.style.display='none';return dropdown;}
Dropdown.prototype.add=function(object){if(typeof object==='string'){this.objects.push({selector:object});}else if(typeof object==='object'){if(!Object.prototype.hasOwnProperty.call(object,'selector')){console.warn('Warning: The object on function add on Dropdown','object do not have selector property, so it wasn\'t','added to the selectors.');return;}
this.objects.push(object);}};Dropdown.prototype.apply=function(){var length=this.objects.length,i=0,j=0,elements=null;for(i=0;i<length;i=i+1){elements=document.querySelectorAll(this.objects[i].selector);for(j=0;j<elements.length;j=j+1){if(elements[j].tagName==='SELECT'){doSomething(elements[j],this.objects[i]);}}}};Dropdown.prototype.version=function(){return VERSION;};Dropdown.prototype.options=function(){return defaults;};global.Dropdown=Dropdown;}(this,this.document));